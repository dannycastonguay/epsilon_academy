(()=>{var c=!1;async function o(n){return new Promise(r=>{c=!0;let e=document.getElementById("terminal"),a=document.getElementById("commandInput"),t=document.getElementById("submitButton"),s=document.createElement("div");s.innerHTML=marked.parse(g(n)),e.appendChild(s),e.scrollTop=e.scrollHeight;let i=d=>{d.type==="keydown"&&d.key!=="Enter"||(a.removeEventListener("keydown",i),t.removeEventListener("click",i),r(a.value),a.value="",c=!1)};a.addEventListener("keydown",i),t.addEventListener("click",i)})}function g(n){return n.replace(/\[([^\]]+)\]\(cmd:\/\/([^\)]+)\)/g,(r,e,a)=>`<button class="command-button" data-cmd="${a}">${e}</button>`)}async function l(){let n=await o(`
  # Dragon \u{1F432}

  ## Character creation

  ### Gender

  You have been reincarnated as a dragon. Are you a [boy](cmd://boy), a [girl](cmd://girl), or something else?`),r="no",e;for(;r!=="yes";){e=(await o(`
### Dragon type

Okay, you are a ${n}. Are you a [Seawing](cmd://seawing), [Rainwing](cmd://rainwing), [Nightwing](cmd://nightwing), [Mudwing](cmd://mudwing), [Sandwing](cmd://sandwing), or [Skywing](cmd://skywing)?`)).toLowerCase();let t;switch(e){case"seawing":t="A seawing is a dragon that can breathe underwater, they have glowing scales to communicate.";break;case"rainwing":t="A rainwing has color-changing scales, and can spit venom. But they have to have their suntime during the day.";break;case"nightwing":t="Nightwings are nocturnal dragons, they are black to mimic the night sky with stars below their wings. And can breathe fire.";break;case"mudwing":t="Mudwings are large and bulky dragons, they like to stay in a pack with their siblings and can breathe underwater for 2 hours.";break;case"sandwing":t="These dragons are specially accustomed to the desert, they have a poisonous barb on their tail and their scales generate warmth.";break;case"skywing":t="Skywings are tall dragons with large wings, they are the fastest flying dragons, they can breathe fire.";break;default:t=`What's a ${e}? You aren't even a dragon!!`}r=(await o(`You have chosen to be a ${e}.
${t}
Are you sure you want to be this dragon [yes](cmd://yes) or [no](cmd://no)`)).toLowerCase()}switch(await o(`
  ## The story begins

  You wake up as a ${n} ${e} dragon in your egg. What will you do? [Break](cmd://break) out of the egg or [Stay](cmd://stay) in the egg`)){case"break":return`You burst out of your egg, floating in the water. Your mother picks you up into her arms.

    # THE END.`;case"stay":return`You decide it's too scary and wait inside the egg for a while.

    # THE END.`;default:return`# ERRORRRRRRRR
    That's not a story option. Bye!`}}})();
